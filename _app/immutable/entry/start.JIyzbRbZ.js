import{o as Se,t as xe}from"../chunks/scheduler.tdcquOLB.js";import{S as st,a as it,b as ct,H as q,N as K,r as ne,o as ke,P as Ae,f as Xe,g as Oe,c as de,i as Pe,s as Te,d as B,e as M,h as Ze,j as gt}from"../chunks/singletons.WSYWxLwy.js";import{U as lt,N as mt,P as yt,a as vt,b as ft,H as wt,p as bt,u as Et}from"../chunks/parse.RrI1B0B4.js";new URL("sveltekit-internal://");function St(e,r){return e==="/"||r==="ignore"?e:r==="never"?e.endsWith("/")?e.slice(0,-1):e:r==="always"&&!e.endsWith("/")?e+"/":e}function xt(e){return e.split("%25").map(decodeURI).join("%25")}function kt(e){for(const r in e)e[r]=decodeURIComponent(e[r]);return e}function $e({href:e}){return e.split("#")[0]}const At=["href","pathname","search","toString","toJSON"];function Ot(e,r,i){const s=new URL(e);Object.defineProperty(s,"searchParams",{value:new Proxy(s.searchParams,{get(l,d){if(d==="get"||d==="getAll"||d==="has")return p=>(i(p),l[d](p));r();const v=Reflect.get(l,d);return typeof v=="function"?v.bind(l):v}}),enumerable:!0,configurable:!0});for(const l of At)Object.defineProperty(s,l,{get(){return r(),e[l]},enumerable:!0,configurable:!0});return Pt(s),s}function Pt(e){Object.defineProperty(e,"hash",{get(){throw new Error("Cannot access event.url.hash. Consider using `$page.url.hash` inside a component instead")}})}const $t="/__data.json",Rt=".html__data.json";function It(e){return e.endsWith(".html")?e.replace(/\.html$/,Rt):e.replace(/\/$/,"")+$t}function jt(...e){let r=5381;for(const i of e)if(typeof i=="string"){let s=i.length;for(;s;)r=r*33^i.charCodeAt(--s)}else if(ArrayBuffer.isView(i)){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);let l=s.length;for(;l;)r=r*33^s[--l]}else throw new TypeError("value must be a string or TypedArray");return(r>>>0).toString(36)}const ut=window.fetch;window.fetch=(e,r)=>((e instanceof Request?e.method:r?.method||"GET")!=="GET"&&re.delete(Ce(e)),ut(e,r));const re=new Map;function Lt(e){const r=atob(e),i=new Uint8Array(r.length);for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s);return i.buffer}function Nt(e,r){const i=Ce(e,r),s=document.querySelector(i);if(s?.textContent){let{body:l,...d}=JSON.parse(s.textContent);const v=s.getAttribute("data-ttl");return v&&re.set(i,{body:l,init:d,ttl:1e3*Number(v)}),s.getAttribute("data-b64")!==null&&(l=Lt(l)),Promise.resolve(new Response(l,d))}return window.fetch(e,r)}function Ut(e,r,i){if(re.size>0){const s=Ce(e,i),l=re.get(s);if(l){if(performance.now()<l.ttl&&["default","force-cache","only-if-cached",void 0].includes(i?.cache))return new Response(l.body,l.init);re.delete(s)}}return window.fetch(r,i)}function Ce(e,r){let s=`script[data-sveltekit-fetched][data-url=${JSON.stringify(e instanceof Request?e.url:e)}]`;if(r?.headers||r?.body){const l=[];r.headers&&l.push([...new Headers(r.headers)].join(",")),r.body&&(typeof r.body=="string"||ArrayBuffer.isView(r.body))&&l.push(r.body),s+=`[data-hash="${jt(...l)}"]`}return s}const Tt=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function Ct(e){const r=[];return{pattern:e==="/"?/^\/$/:new RegExp(`^${Ft(e).map(s=>{const l=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(s);if(l)return r.push({name:l[1],matcher:l[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const d=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(s);if(d)return r.push({name:d[1],matcher:d[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!s)return;const v=s.split(/\[(.+?)\](?!\])/);return"/"+v.map((b,c)=>{if(c%2){if(b.startsWith("x+"))return Re(String.fromCharCode(parseInt(b.slice(2),16)));if(b.startsWith("u+"))return Re(String.fromCharCode(...b.slice(2).split("-").map(A=>parseInt(A,16))));const h=Tt.exec(b);if(!h)throw new Error(`Invalid param: ${b}. Params and matcher names can only have underscores and alphanumeric characters.`);const[,w,N,O,P]=h;return r.push({name:O,matcher:P,optional:!!w,rest:!!N,chained:N?c===1&&v[0]==="":!1}),N?"(.*?)":w?"([^/]*)?":"([^/]+?)"}return Re(b)}).join("")}).join("")}/?$`),params:r}}function Dt(e){return!/^\([^)]+\)$/.test(e)}function Ft(e){return e.slice(1).split("/").filter(Dt)}function Mt(e,r,i){const s={},l=e.slice(1),d=l.filter(p=>p!==void 0);let v=0;for(let p=0;p<r.length;p+=1){const b=r[p];let c=l[p-v];if(b.chained&&b.rest&&v&&(c=l.slice(p-v,p+1).filter(h=>h).join("/"),v=0),c===void 0){b.rest&&(s[b.name]="");continue}if(!b.matcher||i[b.matcher](c)){s[b.name]=c;const h=r[p+1],w=l[p+1];h&&!h.rest&&h.optional&&w&&b.chained&&(v=0),!h&&!w&&Object.keys(s).length===d.length&&(v=0);continue}if(b.optional&&b.chained){v++;continue}return}if(!v)return s}function Re(e){return e.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}function Ht({nodes:e,server_loads:r,dictionary:i,matchers:s}){const l=new Set(r);return Object.entries(i).map(([p,[b,c,h]])=>{const{pattern:w,params:N}=Ct(p),O={id:p,exec:P=>{const A=w.exec(P);if(A)return Mt(A,N,s)},errors:[1,...h||[]].map(P=>e[P]),layouts:[0,...c||[]].map(v),leaf:d(b)};return O.errors.length=O.layouts.length=Math.max(O.errors.length,O.layouts.length),O});function d(p){const b=p<0;return b&&(p=~p),[b,e[p]]}function v(p){return p===void 0?p:[l.has(p),e[p]]}}function De(e,r=JSON.parse){try{return r(sessionStorage[e])}catch{}}function Ie(e,r,i=JSON.stringify){const s=i(r);try{sessionStorage[e]=s}catch{}}class je extends Error{constructor(r,i){super(r),this.name="DevalueError",this.path=i.join("")}}function Qe(e){return Object(e)!==e}const Vt=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function qt(e){const r=Object.getPrototypeOf(e);return r===Object.prototype||r===null||Object.getOwnPropertyNames(r).sort().join("\0")===Vt}function Bt(e){return Object.prototype.toString.call(e).slice(8,-1)}function Gt(e){switch(e){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e<" "?`\\u${e.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}function X(e){let r="",i=0;const s=e.length;for(let l=0;l<s;l+=1){const d=e[l],v=Gt(d);v&&(r+=e.slice(i,l)+v,i=l+1)}return`"${i===0?e:r+e.slice(i)}"`}function Jt(e,r){const i=[],s=new Map,l=[];for(const c in r)l.push({key:c,fn:r[c]});const d=[];let v=0;function p(c){if(typeof c=="function")throw new je("Cannot stringify a function",d);if(s.has(c))return s.get(c);if(c===void 0)return lt;if(Number.isNaN(c))return mt;if(c===1/0)return yt;if(c===-1/0)return vt;if(c===0&&1/c<0)return ft;const h=v++;s.set(c,h);for(const{key:N,fn:O}of l){const P=O(c);if(P)return i[h]=`["${N}",${p(P)}]`,h}let w="";if(Qe(c))w=Le(c);else switch(Bt(c)){case"Number":case"String":case"Boolean":w=`["Object",${Le(c)}]`;break;case"BigInt":w=`["BigInt",${c}]`;break;case"Date":w=`["Date","${c.toISOString()}"]`;break;case"RegExp":const{source:O,flags:P}=c;w=P?`["RegExp",${X(O)},"${P}"]`:`["RegExp",${X(O)}]`;break;case"Array":w="[";for(let A=0;A<c.length;A+=1)A>0&&(w+=","),A in c?(d.push(`[${A}]`),w+=p(c[A]),d.pop()):w+=wt;w+="]";break;case"Set":w='["Set"';for(const A of c)w+=`,${p(A)}`;w+="]";break;case"Map":w='["Map"';for(const[A,D]of c)d.push(`.get(${Qe(A)?Le(A):"..."})`),w+=`,${p(A)},${p(D)}`;w+="]";break;default:if(!qt(c))throw new je("Cannot stringify arbitrary non-POJOs",d);if(Object.getOwnPropertySymbols(c).length>0)throw new je("Cannot stringify POJOs with symbolic keys",d);if(Object.getPrototypeOf(c)===null){w='["null"';for(const A in c)d.push(`.${A}`),w+=`,${X(A)},${p(c[A])}`,d.pop();w+="]"}else{w="{";let A=!1;for(const D in c)A&&(w+=","),A=!0,d.push(`.${D}`),w+=`${X(D)}:${p(c[D])}`,d.pop();w+="}"}}return i[h]=w,h}const b=p(e);return b<0?`${b}`:`[${i.join(",")}]`}function Le(e){const r=typeof e;return r==="string"?X(e):e instanceof String?X(e.toString()):e===void 0?lt.toString():e===0&&1/e<0?ft.toString():r==="bigint"?`["BigInt","${e}"]`:String(e)}const dt=new Set(["load","prerender","csr","ssr","trailingSlash","config"]);[...dt];const Kt=new Set([...dt]);[...Kt];function Yt(e){return e.filter(r=>r!=null)}class _e{constructor(r,i){this.status=r,typeof i=="string"?this.body={message:i}:i?this.body=i:this.body={message:`Error: ${r}`}}toString(){return JSON.stringify(this.body)}}class et{constructor(r,i){this.status=r,this.location=i}}class Fe extends Error{constructor(r,i,s){super(s),this.status=r,this.text=i}}const zt="x-sveltekit-invalidated",Wt="x-sveltekit-trailing-slash";function pe(e){return e instanceof _e||e instanceof Fe?e.status:500}function Xt(e){return e instanceof Fe?e.text:"Internal Error"}const Y=De(st)??{},ae=De(it,bt)??{},oe=De(ct)??{},tt=history.pushState,he=history.replaceState;function Ne(e){Y[e]=Te()}function nt(e,r){let i=e+1;for(;Y[i];)delete Y[i],i+=1;for(i=r+1;oe[i];)delete oe[i],i+=1}function W(e){return location.href=e.href,new Promise(()=>{})}function at(){}function Zt(e,r){const i=Ht(e),s=e.nodes[0],l=e.nodes[1];s(),l();const d=document.documentElement,v=[],p=[];let b=null;const c={before_navigate:[],on_navigate:[],after_navigate:[]};let h={branch:[],error:null,url:null},w=!1,N=!1,O=!0,P=!1,A=!1,D=!1,Z=!1,se=!1,H,L=history.state?.[q],F=history.state?.[K];L||(L=F=Date.now(),he.call(history,{...history.state,[q]:L,[K]:F},"",location.href));const ge=Y[L];ge&&(history.scrollRestoration="manual",scrollTo(ge.x,ge.y));let I,z,me;async function Me(){if(await(me||=Promise.resolve()),!me)return;me=null;const n=ee(h.url,!0);b=null;const t=z={},a=n&&await we(n);t===z&&(a&&(a.type==="redirect"?await ie(new URL(a.location,h.url).href,{},1,t):(a.props.page!==void 0&&(I=a.props.page),H.$set(a.props))),v.length=0)}function He(n){p.some(t=>t?.snapshot)&&(oe[n]=p.map(t=>t?.snapshot?.capture()))}function Ve(n){oe[n]?.forEach((t,a)=>{p[a]?.snapshot?.restore(t)})}function qe(){Ne(L),Ie(st,Y),He(F),Ie(ct,oe),Ie(it,ae,Jt)}async function ie(n,t,a,o){return fe({type:"goto",url:ne(n),keepfocus:t.keepFocus,noscroll:t.noScroll,replace_state:t.replaceState,redirect_count:a,nav_token:o,accept:()=>{t.invalidateAll&&(se=!0)}})}async function Be(n){return b={id:n.id,promise:we(n).then(t=>(t.type==="loaded"&&t.state.error&&(b=null),t))},b.promise}async function ce(n){const t=i.find(a=>a.exec(Ye(n)));t&&await Promise.all([...t.layouts,t.leaf].map(a=>a?.[1]()))}function Ge(n){h=n.state;const t=document.querySelector("style[data-sveltekit]");t&&t.remove(),I=n.props.page,H=new e.root({target:r,props:{...n.props,stores:B,components:p},hydrate:!0}),Ve(F);const a={from:null,to:{params:h.params,route:{id:h.route?.id??null},url:new URL(location.href)},willUnload:!1,type:"enter",complete:Promise.resolve()};c.after_navigate.forEach(o=>o(a)),N=!0}async function Q({url:n,params:t,branch:a,status:o,error:f,route:u,form:_}){let g="never";for(const k of a)k?.slash!==void 0&&(g=k.slash);n.pathname=St(n.pathname,g),n.search=n.search;const E={type:"loaded",state:{url:n,params:t,branch:a,error:f,route:u},props:{constructors:Yt(a).map(k=>k.node.component),page:I}};_!==void 0&&(E.props.form=_);let m={},$=!I,j=0;for(let k=0;k<Math.max(a.length,h.branch.length);k+=1){const S=a[k],U=h.branch[k];S?.data!==U?.data&&($=!0),S&&(m={...m,...S.data},$&&(E.props[`data_${j}`]=m),j+=1)}return(!h.url||n.href!==h.url.href||h.error!==f||_!==void 0&&_!==I.form||$)&&(E.props.page={error:f,params:t,route:{id:u?.id??null},state:{},status:o,url:new URL(n),form:_??null,data:$?m:I.data}),E}async function ye({loader:n,parent:t,url:a,params:o,route:f,server_data_node:u}){let _=null,g=!0;const E={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1,search_params:new Set},m=await n();if(m.universal?.load){let $=function(...y){for(const k of y){const{href:S}=new URL(k,a);E.dependencies.add(S)}};const j={route:new Proxy(f,{get:(y,k)=>(g&&(E.route=!0),y[k])}),params:new Proxy(o,{get:(y,k)=>(g&&E.params.add(k),y[k])}),data:u?.data??null,url:Ot(a,()=>{g&&(E.url=!0)},y=>{g&&E.search_params.add(y)}),async fetch(y,k){let S;y instanceof Request?(S=y.url,k={body:y.method==="GET"||y.method==="HEAD"?void 0:await y.blob(),cache:y.cache,credentials:y.credentials,headers:y.headers,integrity:y.integrity,keepalive:y.keepalive,method:y.method,mode:y.mode,redirect:y.redirect,referrer:y.referrer,referrerPolicy:y.referrerPolicy,signal:y.signal,...k}):S=y;const U=new URL(S,a);return g&&$(U.href),U.origin===a.origin&&(S=U.href.slice(a.origin.length)),N?Ut(S,U.href,k):Nt(S,k)},setHeaders:()=>{},depends:$,parent(){return g&&(E.parent=!0),t()},untrack(y){g=!1;try{return y()}finally{g=!0}}};_=await m.universal.load.call(null,j)??null}return{node:m,loader:n,server:u,universal:m.universal?.load?{type:"data",data:_,uses:E}:null,data:_??u?.data??null,slash:M&&(a.pathname===M||a.pathname===M+"/")?"always":m.universal?.trailingSlash??u?.slash}}function Je(n,t,a,o,f,u){if(se)return!0;if(!f)return!1;if(f.parent&&n||f.route&&t||f.url&&a)return!0;for(const _ of f.search_params)if(o.has(_))return!0;for(const _ of f.params)if(u[_]!==h.params[_])return!0;for(const _ of f.dependencies)if(v.some(g=>g(new URL(_))))return!0;return!1}function ve(n,t){return n?.type==="data"?n:n?.type==="skip"?t??null:null}function ht(n,t){if(!n)return new Set(t.searchParams.keys());const a=new Set([...n.searchParams.keys(),...t.searchParams.keys()]);for(const o of a){const f=n.searchParams.getAll(o),u=t.searchParams.getAll(o);f.every(_=>u.includes(_))&&u.every(_=>f.includes(_))&&a.delete(o)}return a}async function we({id:n,invalidating:t,url:a,params:o,route:f}){if(b?.id===n)return b.promise;const{errors:u,layouts:_,leaf:g}=f,E=[..._,g];u.forEach(x=>x?.().catch(()=>{})),E.forEach(x=>x?.[1]().catch(()=>{}));let m=null;const $=h.url?n!==h.url.pathname+h.url.search:!1,j=h.route?f.id!==h.route.id:!1,y=ht(h.url,a);let k=!1;const S=E.map((x,R)=>{const T=h.branch[R],C=!!x?.[0]&&(T?.loader!==x[1]||Je(k,j,$,y,T.server?.uses,o));return C&&(k=!0),C});if(S.some(Boolean)){try{m=await rt(a,S)}catch(x){return le({status:pe(x),error:await te(x,{url:a,params:o,route:{id:f.id}}),url:a,route:f})}if(m.type==="redirect")return m}const U=m?.nodes;let V=!1;const G=E.map(async(x,R)=>{if(!x)return;const T=h.branch[R],C=U?.[R];if((!C||C.type==="skip")&&x[1]===T?.loader&&!Je(V,j,$,y,T.universal?.uses,o))return T;if(V=!0,C?.type==="error")throw C;return ye({loader:x[1],url:a,params:o,route:f,parent:async()=>{const be={};for(let Ee=0;Ee<R;Ee+=1)Object.assign(be,(await G[Ee])?.data);return be},server_data_node:ve(C===void 0&&x[0]?{type:"skip"}:C??null,x[0]?T?.server:void 0)})});for(const x of G)x.catch(()=>{});const J=[];for(let x=0;x<E.length;x+=1)if(E[x])try{J.push(await G[x])}catch(R){if(R instanceof et)return{type:"redirect",location:R.location};let T=pe(R),C;if(U?.includes(R))T=R.status??T,C=R.error;else if(R instanceof _e)C=R.body;else{if(await B.updated.check())return await W(a);C=await te(R,{params:o,url:a,route:{id:f.id}})}const ue=await Ke(x,J,u);return ue?await Q({url:a,params:o,branch:J.slice(0,ue.idx).concat(ue.node),status:T,error:C,route:f}):await We(a,{id:f.id},C,T)}else J.push(void 0);return await Q({url:a,params:o,branch:J,status:200,error:null,route:f,form:t?void 0:null})}async function Ke(n,t,a){for(;n--;)if(a[n]){let o=n;for(;!t[o];)o-=1;try{return{idx:o+1,node:{node:await a[n](),loader:a[n],data:{},server:null,universal:null}}}catch{continue}}}async function le({status:n,error:t,url:a,route:o}){const f={};let u=null;if(e.server_loads[0]===0)try{const m=await rt(a,[!0]);if(m.type!=="data"||m.nodes[0]&&m.nodes[0].type!=="data")throw 0;u=m.nodes[0]??null}catch{(a.origin!==ke||a.pathname!==location.pathname||w)&&await W(a)}const g=await ye({loader:s,url:a,params:f,route:o,parent:()=>Promise.resolve({}),server_data_node:ve(u)}),E={node:await l(),loader:l,universal:null,server:null,data:null};return await Q({url:a,params:f,branch:[g,E],status:n,error:t,route:null})}function ee(n,t){if(Pe(n,M))return;const a=Ye(n.pathname);for(const o of i){const f=o.exec(a);if(f)return{id:n.pathname+n.search,invalidating:t,route:o,params:kt(f),url:n}}}function Ye(n){return xt(n.slice(M.length)||"/")}function ze({url:n,type:t,intent:a,delta:o}){let f=!1;const u=ot(h,a,n,t);o!==void 0&&(u.navigation.delta=o);const _={...u.navigation,cancel:()=>{f=!0,u.reject(new Error("navigation was cancelled"))}};return A||c.before_navigate.forEach(g=>g(_)),f?null:u}async function fe({type:n,url:t,popped:a,keepfocus:o,noscroll:f,replace_state:u,redirect_count:_=0,nav_token:g={},accept:E=at,block:m=at}){const $=ee(t,!1),j=ze({url:t,type:n,delta:a?.delta,intent:$});if(!j){m();return}const y=L,k=F;E(),A=!0,N&&B.navigating.set(j.navigation),z=g;let S=$&&await we($);if(!S){if(Pe(t,M))return await W(t);S=await We(t,{id:null},await te(new Fe(404,"Not Found",`Not found: ${t.pathname}`),{url:t,params:{},route:{id:null}}),404)}if(t=$?.url||t,z!==g)return j.reject(new Error("navigation was aborted")),!1;if(S.type==="redirect")if(_>=20)S=await le({status:500,error:await te(new Error("Redirect loop"),{url:t,params:{},route:{id:null}}),url:t,route:{id:null}});else return ie(new URL(S.location,t).href,{},_+1,g),!1;else S.props.page.status>=400&&await B.updated.check()&&await W(t);v.length=0,se=!1,P=!0,Ne(y),He(k),S.props.page.url.pathname!==t.pathname&&(t.pathname=S.props.page.url.pathname);const U=a?a.state:{};if(!a){const x=u?0:1,R={[q]:L+=x,[K]:F+=x};(u?he:tt).call(history,R,"",t),u||nt(L,F)}if(ae[L]=U,b=null,S.props.page.state=U,N){h=S.state,S.props.page&&(S.props.page.url=t);const x=(await Promise.all(c.on_navigate.map(R=>R(j.navigation)))).filter(R=>typeof R=="function");if(x.length>0){let R=function(){c.after_navigate=c.after_navigate.filter(T=>!x.includes(T))};x.push(R),c.after_navigate.push(...x)}H.$set(S.props),Z=!0}else Ge(S);const{activeElement:V}=document;await xe();const G=a?a.scroll:f?Te():null;if(O){const x=t.hash&&document.getElementById(decodeURIComponent(t.hash.slice(1)));G?scrollTo(G.x,G.y):x?x.scrollIntoView():scrollTo(0,0)}const J=document.activeElement!==V&&document.activeElement!==document.body;!o&&!J&&Ue(),O=!0,S.props.page&&(I=S.props.page),A=!1,n==="popstate"&&Ve(F),j.fulfil(void 0),c.after_navigate.forEach(x=>x(j.navigation)),B.navigating.set(null),P=!1}async function We(n,t,a,o){return n.origin===ke&&n.pathname===location.pathname&&!w?await le({status:o,error:a,url:n,route:t}):await W(n)}function _t(){let n;d.addEventListener("mousemove",u=>{const _=u.target;clearTimeout(n),n=setTimeout(()=>{o(_,2)},20)});function t(u){o(u.composedPath()[0],1)}d.addEventListener("mousedown",t),d.addEventListener("touchstart",t,{passive:!0});const a=new IntersectionObserver(u=>{for(const _ of u)_.isIntersecting&&(ce(_.target.href),a.unobserve(_.target))},{threshold:0});function o(u,_){const g=Xe(u,d);if(!g)return;const{url:E,external:m,download:$}=Oe(g,M);if(m||$)return;const j=de(g);if(!j.reload)if(_<=j.preload_data){const y=ee(E,!1);y&&Be(y)}else _<=j.preload_code&&ce(E.pathname)}function f(){a.disconnect();for(const u of d.querySelectorAll("a")){const{url:_,external:g,download:E}=Oe(u,M);if(g||E)continue;const m=de(u);m.reload||(m.preload_code===Ze.viewport&&a.observe(u),m.preload_code===Ze.eager&&ce(_.pathname))}}c.after_navigate.push(f),f()}function te(n,t){if(n instanceof _e)return n.body;const a=pe(n),o=Xt(n);return e.hooks.handleError({error:n,event:t,status:a,message:o})??{message:o}}return{after_navigate:n=>{Se(()=>(c.after_navigate.push(n),()=>{const t=c.after_navigate.indexOf(n);c.after_navigate.splice(t,1)}))},before_navigate:n=>{Se(()=>(c.before_navigate.push(n),()=>{const t=c.before_navigate.indexOf(n);c.before_navigate.splice(t,1)}))},on_navigate:n=>{Se(()=>(c.on_navigate.push(n),()=>{const t=c.on_navigate.indexOf(n);c.on_navigate.splice(t,1)}))},disable_scroll_handling:()=>{(P||!N)&&(O=!1)},goto:(n,t={})=>(n=ne(n),n.origin!==ke?Promise.reject(new Error("goto: invalid URL")):ie(n,t,0)),invalidate:n=>{if(typeof n=="function")v.push(n);else{const{href:t}=new URL(n,location.href);v.push(a=>a.href===t)}return Me()},invalidate_all:()=>(se=!0,Me()),preload_data:async n=>{const t=ne(n),a=ee(t,!1);if(!a)throw new Error(`Attempted to preload a URL that does not belong to this app: ${t}`);const o=await Be(a);if(o.type==="redirect")return{type:o.type,location:o.location};const{status:f,data:u}=o.props.page??I;return{type:o.type,status:f,data:u}},preload_code:n=>ce(n),push_state:(n,t)=>{const a={[q]:L+=1,[K]:F,[Ae]:I.url.href};tt.call(history,a,"",ne(n)),I={...I,state:t},H.$set({page:I}),ae[L]=t,nt(L,F)},replace_state:(n,t)=>{const a={[q]:L,[K]:F,[Ae]:I.url.href};he.call(history,a,"",ne(n)),I={...I,state:t},H.$set({page:I}),ae[L]=t},apply_action:async n=>{if(n.type==="error"){const t=new URL(location.href),{branch:a,route:o}=h;if(!o)return;const f=await Ke(h.branch.length,a,o.errors);if(f){const u=await Q({url:t,params:h.params,branch:a.slice(0,f.idx).concat(f.node),status:n.status??500,error:n.error,route:o});h=u.state,H.$set(u.props),xe().then(Ue)}}else n.type==="redirect"?ie(n.location,{invalidateAll:!0},0):(H.$set({form:null,page:{...I,form:n.data,status:n.status}}),await xe(),H.$set({form:n.data}),n.type==="success"&&Ue())},_start_router:()=>{history.scrollRestoration="manual",addEventListener("beforeunload",t=>{let a=!1;if(qe(),!A){const o=ot(h,void 0,null,"leave"),f={...o.navigation,cancel:()=>{a=!0,o.reject(new Error("navigation was cancelled"))}};c.before_navigate.forEach(u=>u(f))}a?(t.preventDefault(),t.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&qe()}),navigator.connection?.saveData||_t(),d.addEventListener("click",t=>{if(t.button||t.which!==1||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.defaultPrevented)return;const a=Xe(t.composedPath()[0],d);if(!a)return;const{url:o,external:f,target:u,download:_}=Oe(a,M);if(!o)return;if(u==="_parent"||u==="_top"){if(window.parent!==window)return}else if(u&&u!=="_self")return;const g=de(a);if(!(a instanceof SVGAElement)&&o.protocol!==location.protocol&&!(o.protocol==="https:"||o.protocol==="http:")||_)return;if(f||g.reload){ze({url:o,type:"link"})?A=!0:t.preventDefault();return}const[m,$]=o.href.split("#");if($!==void 0&&m===$e(location)){if(h.url.hash===o.hash){t.preventDefault(),a.ownerDocument.getElementById($)?.scrollIntoView();return}if(D=!0,Ne(L),n(o),!g.replace_state)return;D=!1}t.preventDefault(),fe({type:"link",url:o,keepfocus:g.keepfocus,noscroll:g.noscroll,replace_state:g.replace_state??o.href===location.href})}),d.addEventListener("submit",t=>{if(t.defaultPrevented)return;const a=HTMLFormElement.prototype.cloneNode.call(t.target),o=t.submitter;if((o?.formMethod||a.method)!=="get")return;const u=new URL(o?.hasAttribute("formaction")&&o?.formAction||a.action);if(Pe(u,M))return;const _=t.target,g=de(_);if(g.reload)return;t.preventDefault(),t.stopPropagation();const E=new FormData(_),m=o?.getAttribute("name");m&&E.append(m,o?.getAttribute("value")??""),u.search=new URLSearchParams(E).toString(),fe({type:"form",url:u,keepfocus:g.keepfocus,noscroll:g.noscroll,replace_state:g.replace_state??u.href===location.href})}),addEventListener("popstate",async t=>{if(t.state?.[q]){const a=t.state[q];if(z={},a===L)return;const o=Y[a],f=ae[a]??{},u=new URL(t.state[Ae]??location.href),_=t.state[K],g=$e(location)===$e(h.url);if(_===F&&(Z||g)){n(u),Y[L]=Te(),o&&scrollTo(o.x,o.y),f!==I.state&&(I={...I,state:f},H.$set({page:I})),L=a;return}const m=a-L;await fe({type:"popstate",url:u,popped:{state:f,scroll:o,delta:m},accept:()=>{L=a,F=_},block:()=>{history.go(-m)},nav_token:z})}else if(!D){const a=new URL(location.href);n(a)}}),addEventListener("hashchange",()=>{D&&(D=!1,he.call(history,{...history.state,[q]:++L,[K]:F},"",location.href))});for(const t of document.querySelectorAll("link"))t.rel==="icon"&&(t.href=t.href);addEventListener("pageshow",t=>{t.persisted&&B.navigating.set(null)});function n(t){h.url=t,B.page.set({...I,url:t}),B.page.notify()}},_hydrate:async({status:n=200,error:t,node_ids:a,params:o,route:f,data:u,form:_})=>{w=!0;const g=new URL(location.href);({params:o={},route:f={id:null}}=ee(g,!1)||{});let E;try{const m=a.map(async(y,k)=>{const S=u[k];return S?.uses&&(S.uses=pt(S.uses)),ye({loader:e.nodes[y],url:g,params:o,route:f,parent:async()=>{const U={};for(let V=0;V<k;V+=1)Object.assign(U,(await m[V]).data);return U},server_data_node:ve(S)})}),$=await Promise.all(m),j=i.find(({id:y})=>y===f.id);if(j){const y=j.layouts;for(let k=0;k<y.length;k++)y[k]||$.splice(k,0,void 0)}E=await Q({url:g,params:o,branch:$,status:n,error:t,form:_,route:j??null})}catch(m){if(m instanceof et){await W(new URL(m.location,location.href));return}E=await le({status:pe(m),error:await te(m,{url:g,params:o,route:f}),url:g,route:f})}E.props.page&&(E.props.page.state={}),Ge(E)}}}async function rt(e,r){const i=new URL(e);i.pathname=It(e.pathname),e.pathname.endsWith("/")&&i.searchParams.append(Wt,"1"),i.searchParams.append(zt,r.map(l=>l?"1":"0").join(""));const s=await ut(i.href);if(!s.ok){let l;throw s.headers.get("content-type")?.includes("application/json")?l=await s.json():s.status===404?l="Not Found":s.status===500&&(l="Internal Error"),new _e(s.status,l)}return new Promise(async l=>{const d=new Map,v=s.body.getReader(),p=new TextDecoder;function b(h){return Et(h,{Promise:w=>new Promise((N,O)=>{d.set(w,{fulfil:N,reject:O})})})}let c="";for(;;){const{done:h,value:w}=await v.read();if(h&&!c)break;for(c+=!w&&c?`
`:p.decode(w);;){const N=c.indexOf(`
`);if(N===-1)break;const O=JSON.parse(c.slice(0,N));if(c=c.slice(N+1),O.type==="redirect")return l(O);if(O.type==="data")O.nodes?.forEach(P=>{P?.type==="data"&&(P.uses=pt(P.uses),P.data=b(P.data))}),l(O);else if(O.type==="chunk"){const{id:P,data:A,error:D}=O,Z=d.get(P);d.delete(P),D?Z.reject(b(D)):Z.fulfil(b(A))}}}})}function pt(e){return{dependencies:new Set(e?.dependencies??[]),params:new Set(e?.params??[]),parent:!!e?.parent,route:!!e?.route,url:!!e?.url,search_params:new Set(e?.search_params??[])}}function Ue(){const e=document.querySelector("[autofocus]");if(e)e.focus();else{const r=document.body,i=r.getAttribute("tabindex");r.tabIndex=-1,r.focus({preventScroll:!0,focusVisible:!1}),i!==null?r.setAttribute("tabindex",i):r.removeAttribute("tabindex");const s=getSelection();if(s&&s.type!=="None"){const l=[];for(let d=0;d<s.rangeCount;d+=1)l.push(s.getRangeAt(d));setTimeout(()=>{if(s.rangeCount===l.length){for(let d=0;d<s.rangeCount;d+=1){const v=l[d],p=s.getRangeAt(d);if(v.commonAncestorContainer!==p.commonAncestorContainer||v.startContainer!==p.startContainer||v.endContainer!==p.endContainer||v.startOffset!==p.startOffset||v.endOffset!==p.endOffset)return}s.removeAllRanges()}})}}}function ot(e,r,i,s){let l,d;const v=new Promise((b,c)=>{l=b,d=c});return v.catch(()=>{}),{navigation:{from:{params:e.params,route:{id:e.route?.id??null},url:e.url},to:i&&{params:r?.params??null,route:{id:r?.route?.id??null},url:i},willUnload:!r,type:s,complete:v},fulfil:l,reject:d}}async function nn(e,r,i){const s=Zt(e,r);gt({client:s}),i?await s._hydrate(i):s.goto(location.href,{replaceState:!0}),s._start_router()}export{nn as start};
